import json
import unittest
import action as Action
import datetime
from upload import init_session, upload_data

testFirstData = b'{"action":"cst","sport":11,"mode":2,"type":1,"menu":{"list":[{"type":54,"count":[11]},{"type":11,"count":[10,8,0,1,1,1,0]},{"type":12,"count":[4,4,0,0,0]},{"type":13,"count":[1,0,0,0,0,0]},{"type":14,"count":[8,5,4,0]},{"type":21,"count":[6,4,2,0]},{"type":18,"count":[3,0,1,3]}]},"ally":[["11_2762_0_2","\xe7\x83\x8f\xe6\x8b\x89\xe5\x9c\xad\xe5\xbe\x8c\xe5\x82\x99\xe8\x81\xaf\xe8\xb3\xbd",70094000,11,11],["11_6642_0_2","\xe6\x96\xaf\xe6\xb4\x9b\xe4\xbc\x90\xe5\x85\x8b\xe4\xb8\x99\xe7\xb5\x84\xe8\x81\xaf\xe8\xb3\xbdU19",70910000,11,11],["11_6563_0_2","\xe7\x83\x8f\xe8\x8c\xb2\xe5\x88\xa5\xe5\x85\x8b\xe5\xa5\xb3\xe5\xad\x90\xe8\xb6\x85\xe7\xb4\x9a\xe8\x81\xaf\xe8\xb3\xbd",130027000,11,11],["11_6622_98_2","ACL\xe8\xb6\xb3\xe7\x90\x83 - 2X10\xe5\x88\x86\xe9\x90\x98",140001010,11,11],["11_7976_98_2","\xe9\xbe\x8d\xe8\x81\xaf\xe7\x9b\x9fA\xe7\xb5\x84\xe8\x81\xaf\xe8\xb3\xbd - 2X10\xe5\x88\x86\xe9\x90\x98",140005010,11,11],["11_7975_100_2","\xe9\xbe\x8d\xe8\x81\xaf\xe7\x9b\x9fB\xe7\xb5\x84\xe8\x81\xaf\xe8\xb3\xbd - 2X15\xe5\x88\x86\xe9\x90\x98",140006012,11,11],["11_6445_99_2","\xe5\xbe\xb7\xe5\x9c\x8b\xe7\x94\xb2\xe7\xb5\x84\xe6\xa5\xad\xe9\xa4\x98LFL\xe7\x94\xb7\xe5\xad\x90\xe8\xb6\xb3\xe7\x90\x83 - 2X12\xe5\x88\x86\xe9\x90\x98",800014011,11,11],["11_6488_98_2","USSR\xe7\x94\xb7\xe5\xad\x90\xe8\xb6\xb3\xe7\x90\x83 - 2X10\xe5\x88\x86\xe9\x90\x98",800021010,11,11],["11_6685_100_2","\xe4\xbf\x84\xe7\xbe\x85\xe6\x96\xaf\xe5\xa4\xa7\xe5\xad\xb8\xe7\x94\xb7\xe5\xad\x90\xe8\xb6\xb3\xe7\x90\x83 - 2X15\xe5\x88\x86\xe9\x90\x98",800033012,11,11],["11_7036_98_2","NL\xe8\xb6\xb3\xe7\x90\x83 - 2X10\xe5\x88\x86\xe9\x90\x98",800048010,11,11]],"allyIndex":["11_2762_0_2","11_6642_0_2","11_6563_0_2","11_6622_98_2","11_7976_98_2","11_7975_100_2","11_6445_99_2","11_6488_98_2","11_6685_100_2","11_7036_98_2"],"game":[["112584186","11_2762_0_2",["\xe5\x88\xa9\xe7\x89\xa9\xe6\xb5\xa6\xe8\x92\x99\xe7\x89\xb9\xe7\xb6\xad\xe5\xa4\x9a-\xe5\xbe\x8c\xe5\x82\x99"],["\xe8\x92\x99\xe7\x89\xb9\xe7\xb6\xad\xe5\xa4\x9a\xe6\xb2\xb3\xe5\xba\x8a\xe9\x9a\x8a-\xe5\xbe\x8c\xe5\x82\x99"],"","",[""],[""],1,"2022/05/31 21:00","2022/05/31 22:14:34","3","","",0,1,"2022/06/01","72AB10C0D9705C54",0,"45",1],["112584193","11_6642_0_2",["\xe6\xb3\xa2\xe6\x99\xae\xe6\x8b\x89\xe5\xbe\xb7\xe6\x96\xaf\xe7\x89\xb9\xe6\x8b\x89\xe6\xbe\xa4\xe5\xb8\x8c\xe6\xa2\x85\xe9\x81\x94U19"],["\xe6\x96\xaf\xe7\xb6\xad\xe5\xbe\xb7\xe5\xb0\xbc\xe5\x85\x8bU19"],"","",[""],[""],1,"2022/05/31 21:00","2022/05/31 22:05:43","3","","",0,1,"2022/06/01","14A1A1C2538185F1",0,"45",1],["112584177","11_6563_0_2",["\xe5\xa1\x94\xe4\xbb\x80\xe5\xb9\xb2\xe7\x81\xab\xe8\xbb\x8a\xe9\xa0\xad-\xe5\xa5\xb3"],["\xe7\xb4\x8d\xe6\x9b\xbc\xe5\xb9\xb2\xe7\xb4\x8d\xe5\xbc\x97\xe5\xb7\xb4\xe9\x9c\x8d-\xe5\xa5\xb3"],"","",[""],[""],1,"2022/05/31 20:30","2022/05/31 21:38:22","3","","",0,1,"2022/06/01","A8174ED24944BCBA",0,"45",1],["112584212","11_6622_98_2",["AC\xe7\xb1\xb3\xe8\x98\xad-ACL"],["\xe5\x9c\x8b\xe9\x9a\x9b\xe7\xb1\xb3\xe8\x98\xad-ACL"],"","",[""],[""],1,"2022/05/31 22:01","2022/05/31 22:16:04","3","","",0,1,"2022/06/01","1E4EDA0EA9B982EC",0,"10",1],["112584209","11_7976_98_2",["AC\xe7\xb1\xb3\xe8\x98\xad\xe6\xa5\xad\xe9\xa4\x98"],["\xe8\x8f\xaf\xe5\x80\xab\xe8\xa5\xbf\xe4\xba\x9e\xe6\xa5\xad\xe9\xa4\x98"],"","",[""],[""],1,"2022/05/31 22:00","2022/05/31 22:13:50","3","","",0,1,"2022/06/01","6257CE9496E9323A",0,"10",1],["112584215","11_7975_100_2",["\xe5\xa1\x9e\xe5\x88\xa9\xe6\xa5\xad\xe9\xa4\x98"],["\xe7\xa7\x91\xe5\xb0\xbc\xe6\xa5\xad\xe9\xa4\x98"],"","",[""],[""],1,"2022/05/31 22:05","2022/05/31 22:11:12","1","","",0,1,"2022/06/01","A23AE4AFFB9C2537",0,"15",1],["112584206","11_6445_99_2",["\xe6\x85\x95\xe5\xb0\xbc\xe9\xbb\x911860\xe6\xa5\xad\xe9\xa4\x98"],["FT\xe5\xb8\x83\xe5\x80\xab\xe7\x91\x9e\xe5\x85\x8b\xe6\xa5\xad\xe9\xa4\x98"],"","",[""],[""],1,"2022/05/31 21:59","2022/05/31 22:12:05","3","","",0,1,"2022/06/01","BB0C1273AB493810",0,"12",1],["112584208","11_6488_98_2",["\xe7\x83\x8f\xe5\x85\x8b\xe8\x98\xad\xe6\xa5\xad\xe9\xa4\x98"],["\xe4\xbf\x84\xe7\xbe\x85\xe6\x96\xaf\xe6\xa5\xad\xe9\xa4\x98"],"","",[""],[""],1,"2022/05/31 22:00","2022/05/31 22:10:07","3","","",0,1,"2022/06/01","D2E870C46A04B32C",0,"10",1],["112584205","11_6685_100_2",["\xe6\x94\xbf\xe7\xad\x96\xe5\xad\xb8\xe9\x99\xa2"],["\xe5\x8c\x96\xe5\xad\xb8\xe5\xad\xb8\xe9\x99\xa2"],"","",[""],[""],1,"2022/05/31 22:00","2022/05/31 22:05:24","1","","",0,1,"2022/06/01","5915B86DD2AFCF5B",0,"15",1],["112584207","11_7036_98_2",["\xe5\xb7\xb4\xe9\xbb\x8e\xe6\xa5\xad\xe9\xa4\x98"],["\xe7\xbe\x85\xe7\xb4\xa2\xe5\x85\xa7\xe9\x87\x8c\xe6\xa5\xad\xe9\xa4\x98"],"","",[""],[""],1,"2022/05/31 22:00","2022/05/31 22:10:07","3","","",0,1,"2022/06/01","EECBF74A04056B99",0,"10",1]],"score": {"112584186":["0","0","","",[],[],0,0,["0","0","0","0","0","0"],["0","0","0","0","0","0"],0,13,"0","0"],"112584193":["3","1","","",[],[],0,0,["0","0","0","0","0","0"],["0","0","0","0","0","0"],0,12,"3","1"],"112584177":["3","0","","",[],[],0,0,["0","0","0","0","0","0"],["0","0","0","0","0","0"],0,6,"3","0"],"112584212":["2","6","","",[],[],0,0,["0","0","0","0","0","0"],["0","0","0","0","0","0"],0,8,"2","6"],"112584209":["1","2","","",[],[],0,0,["0","0","0","0","0","0"],["0","0","0","0","0","0"],0,8,"1","2"],"112584215":["2","2","","",[],[],0,0,["0","0","0","0","0","0"],["0","0","0","0","0","0"],0,16,"2","2"],"112584206":["3","3","","",[],[],0,0,["0","0","0","0","0","0"],["0","0","0","0","0","0"],0,8,"3","3"],"112584208":["5","9","","",[],[],0,0,["0","0","0","0","0","0"],["0","0","0","0","0","0"],0,0,"5","9"],"112584205":["1","0","","",[],[],0,0,["0","0","0","0","0","0"],["0","0","0","0","0","0"],0,8,"1","0"],"112584207":["4","6","","",[],[],0,0,["0","0","0","0","0","0"],["0","0","0","0","0","0"],0,0,"4","6"]},"odds":[["112584186",["11001","0","0","0702","07",1,0,10,"0",1,0,0,"1",0.640,"2",1.350],["11001","0","0","0701","07",1,0,10,"250",1,0,0,"1",1.140,"2",0.790],["11002","0","0","0701","07",1,0,10,"1250",1,0,0,"1",1.070,"2",0.850],["11003","0","0","0701","07",1,0,10,"0",1,0,0,"1",1.494,"2",2.525,"3",1.323],["11002","0","0","0702","07",1,0,10,"1000",1,0,0,"1",0.610,"2",1.390]],["112584193",["11001","3","1","0701","07",1,0,10,"1000",1,0,0,"1",0.850,"2",1.040],["11001","3","1","0702","07",1,0,10,"1250",1,0,0,"1",1.230,"2",0.680],["11001","3","1","0703","07",1,0,10,"750",1,0,0,"1",0.580,"2",1.390],["11001","3","1","0704","07",1,0,10,"500",1,0,0,"1",0.560,"2",1.430],["11001","3","1","0705","07",1,0,10,"1500",1,0,0,"1",1.580,"2",0.490],["11002","3","1","0701","07",1,0,10,"6000",1,0,0,"1",0.880,"2",1.000],["11002","3","1","0702","07",1,0,10,"6250",1,0,0,"1",1.190,"2",0.710],["11002","3","1","0703","07",1,0,10,"6500",1,0,0,"1",1.230,"2",0.680],["11002","3","1","0704","07",1,0,10,"5750",1,0,0,"1",0.570,"2",1.410],["11002","3","1","0705","07",1,0,10,"5500",1,0,0,"1",0.470,"2",1.640],["11003","3","1","0701","07",1,0,10,"0",1,0,0,"1",0.010,"2",24.000,"3",14.700]],["112584177",["11003","3","0","0701","07",1,0,10,"",1,0,0,"1","","2","","3",""],["11001","3","0","0702","07",1,0,10,"",1,0,0,"1","","2",""],["11002","3","0","0702","07",1,0,10,"",1,0,0,"1","","2",""],["11001","3","0","0701","07",1,0,10,"250",1,0,0,"1",1.430,"2",0.550],["11002","3","0","0701","07",1,0,10,"3500",1,0,0,"1",1.530,"2",0.510]],["112584212",["11001","2","6","0701","07",1,0,14,"0",1,0,0,"1",0.920,"2",0.920],["11001","2","6","0702","07",1,0,14,"250",1,0,0,"1",1.150,"2",0.720],["11001","2","6","0703","07",1,0,14,"250",0,0,0,"1",0.720,"2",1.150],["11003","2","6","0701","07",1,0,14,"0",1,0,0,"1",16.000,"2",0.001,"3",9.000],["11002","2","6","0701","07",1,0,14,"12250",1,0,0,"1",1.070,"2",0.790],["11002","2","6","0702","07",1,0,14,"12000",1,0,0,"1",0.830,"2",1.020],["11002","2","6","0703","07",1,0,14,"12500",1,0,0,"1",1.290,"2",0.580]],["112584209",["11001","1","2","0701","07",1,0,14,"0",1,0,0,"1",0.930,"2",0.930],["11001","1","2","0702","07",1,0,14,"250",1,0,0,"1",1.740,"2",0.450],["11001","1","2","0703","07",1,0,14,"250",0,0,0,"1",0.450,"2",1.740],["11002","1","2","0701","07",1,0,14,"3750",1,0,0,"1",0.880,"2",0.980],["11002","1","2","0702","07",1,0,14,"4000",1,0,0,"1",1.490,"2",0.510],["11002","1","2","0703","07",1,0,14,"3500",1,0,0,"1",0.570,"2",1.390],["11003","1","2","0701","07",1,0,14,"0",1,0,0,"1",14.400,"2",0.210,"3",4.260]],["112584215",["11001","2","2","0701","07",1,0,14,"250",0,0,0,"1",0.940,"2",0.910],["11001","2","2","0702","07",1,0,14,"0",1,0,0,"1",1.130,"2",0.740],["11002","2","2","0701","07",1,0,14,"",1,0,0,"1","","2",""],["11002","2","2","0702","07",1,0,14,"",1,0,0,"1","","2",""],["11002","2","2","0703","07",1,0,14,"",1,0,0,"1","","2",""],["11102","2","2","0701","07",1,0,14,"",1,0,0,"1","","2",""],["11102","2","2","0702","07",1,0,14,"",1,0,0,"1","","2",""],["11001","2","2","0703","07",1,0,14,"750",0,0,0,"1",0.640,"2",1.270],["11101","2","2","0701","07",1,0,14,"0",1,0,0,"1",1.120,"2",0.750],["11102","2","2","0703","07",1,0,14,"",1,0,0,"1","","2",""],["11003","2","2","0701","07",1,0,14,"0",1,0,0,"1",1.330,"2",0.910,"3",6.700],["11101","2","2","0702","07",1,0,14,"250",0,0,0,"1",0.740,"2",1.130],["11101","2","2","0703","07",1,0,14,"250",1,0,0,"1",1.530,"2",0.520],["11103","2","2","0701","07",1,0,14,"0",1,0,0,"1",1.990,"2",1.480,"3",1.810]],["112584206",["11001","3","3","0701","07",1,0,12,"0",1,0,0,"1",1.000,"2",0.840],["11001","3","3","0702","07",1,0,12,"250",0,0,0,"1",0.590,"2",1.360],["11001","3","3","0703","07",1,0,12,"250",1,0,0,"1",1.520,"2",0.520],["11002","3","3","0701","07",1,0,12,"7500",1,0,0,"1",1.200,"2",0.670],["11002","3","3","0702","07",1,0,12,"7250",1,0,0,"1",0.830,"2",1.030],["11002","3","3","0703","07",1,0,12,"7750",1,0,0,"1",1.640,"2",0.440],["11003","3","3","0701","07",1,0,12,"0",1,0,0,"1",1.992,"2",1.784,"3",1.580]],["112584205",["11001","1","0","0701","07",1,0,12,"500",1,0,0,"1",0.920,"2",0.930],["11001","1","0","0702","07",1,0,12,"750",1,0,0,"1",1.140,"2",0.730],["11001","1","0","0703","07",1,0,12,"250",1,0,0,"1",0.720,"2",1.150],["11002","1","0","0701","07",1,0,12,"5000",1,0,0,"1",0.930,"2",0.930],["11002","1","0","0702","07",1,0,12,"5250",1,0,0,"1",1.160,"2",0.710],["11002","1","0","0703","07",1,0,12,"5500",1,0,0,"1",1.410,"2",0.510],["11003","1","0","0701","07",1,0,12,"0",1,0,0,"1",0.330,"2",4.960,"3",5.190]]],"ballIndex":[100,54,53,27,26,52,51,11,12,13,14,15,19,16,17,22,23,21,20,18,28,24],"limit":{"101":{"10001":{"obl":"10","gbm":"3000","cwm":"1000000","enable":1}},"112":{"11001":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11002":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11003":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11004":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11011":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11012":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11013":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11014":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11015":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11016":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11021":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11022":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11023":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11024":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11061":{"obl":"100","gbm":"15000","cwm":"3000000","enable":1,"obm":"15000"},"11062":{"obl":"100","gbm":"15000","cwm":"3000000","enable":1,"obm":"15000"},"11063":{"obl":"100","gbm":"15000","cwm":"3000000","enable":1,"obm":"15000"},"11064":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11065":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11066":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11067":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11068":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11069":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11070":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11071":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11101":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11102":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11103":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11104":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11111":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11112":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11113":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11114":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11115":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11116":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11121":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11122":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11123":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11124":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11161":{"obl":"100","gbm":"15000","cwm":"3000000","enable":1,"obm":"15000"},"11162":{"obl":"100","gbm":"15000","cwm":"3000000","enable":1,"obm":"15000"},"11164":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11165":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11167":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11201":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11202":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11203":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11204":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11211":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11212":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11213":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11214":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11221":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11222":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11223":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11224":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11231":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11232":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11233":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11234":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11241":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11242":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11243":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11244":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11251":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11252":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11253":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11254":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11301":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11302":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11303":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11304":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11311":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11312":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11313":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11314":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11321":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11322":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11323":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11324":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11331":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11332":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11333":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11334":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11341":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11342":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11343":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11344":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11351":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11352":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11353":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11354":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11401":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11402":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11403":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11404":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11411":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11412":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11413":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11414":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11421":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11422":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11423":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11424":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11431":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11432":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11433":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11434":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11441":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11442":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11443":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11444":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11451":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11452":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11453":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11454":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11501":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11502":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11503":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11504":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11505":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11506":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11507":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11531":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11551":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11552":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11553":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11554":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11556":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11557":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11571":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11572":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11574":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11576":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11577":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11601":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11602":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11603":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11604":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11605":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11701":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11702":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11703":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11711":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11712":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"},"11713":{"obl":"100","gbm":"15000","cwm":"0","enable":1,"obm":"15000"}},"default":{"10001":{"obl":"10","gbm":"3000","cwm":"1000000","enable":1}}},"zdCount":10,"coin":5,"module":0,"mtv":178,"dc":2,"stick":1,"date":"2022/05/31 22:20:35","group":0,"sn":13858239000}'

class TestActionMethods(unittest.TestCase):

    def test_IsSC(self):
        self.assertTrue(Action.IsSC('sc'))
        self.assertTrue(Action.IsSC('eu'))
        self.assertTrue(Action.IsSC('wd'))
        self.assertTrue(Action.IsSC('ch'))
        self.assertTrue(Action.IsSC('fi'))
        self.assertFalse(Action.IsSC('cs'))
        self.assertFalse(Action.IsSC('bx'))
        self.assertFalse(Action.IsSC('bb'))
        self.assertFalse(Action.IsSC('tt'))
        self.assertFalse(Action.IsSC('tn'))

    def test_AllyNameProcess(self):
        self.assertEqual(Action.AllyNameProcess("12_2423_0_2", "測試"), "測試")
        self.assertEqual(Action.AllyNameProcess("12_2423_0_1", "測試"), "測試")
        self.assertEqual(Action.AllyNameProcess("12_2423_0_3", "測試"), "測試 - 加時賽")

    def test_TransformStatus(self):
        self.assertEqual(Action.TransformStatus("sc", 60), "結束")
        self.assertEqual(Action.TransformStatus("sc", 1), "上半場")
        self.assertEqual(Action.TransformStatus("bb", 151), "50下")

    def test_addZero(self):
        self.assertEqual(Action.addZero(5, 2), "05")
        self.assertEqual(Action.addZero(11, 2), "11")

    #def test_TransformNumToPk(self):
        #self.assertEqual(Action.TransformNumToPk("12001", "1500"), "1.5")
        #self.assertEqual(Action.TransformNumToPk("12101", "1500"), "1.5")
        #self.assertEqual(Action.TransformNumToPk("12102", "117500"), "117.5")
        #self.assertEqual(Action.TransformNumToPk("12002", "238500"), "238.5")

    def test_ActionFirst(self):
        global testFirstData
        testDecodeData = testFirstData.decode("utf-8")
        testJsonData = json.loads(testDecodeData)
        #print(testDecodeData)
        Action.ActionFirst(testJsonData)

    def test_Upload(self):
        self._upload_status = True
        mq_url = 'amqp://test:qwerasdf@211.75.222.147:5672/%2F?heartbeat=60&connection_attempts=3&retry_delay=3&socket_timeout=3'
        self.connection, self.channel = init_session(mq_url)
        testDecodeData = testFirstData.decode("utf-8")
        testJsonData = json.loads(testDecodeData)
        datetime_dt = datetime.datetime.today()
        datetime_dt = datetime_dt + datetime.timedelta(hours=8)
        datetime_str = datetime_dt.strftime("%Y-%m-%d %H:%M:%S.%f")[:-3]
        testJsonData["date"] = datetime_str
        gameOddsList = Action.ActionFirst(testJsonData)

        if self.connection.is_closed or self.channel.is_closed or not self._upload_status:
            if self.connection.is_open:
                self.connection.close()
            self.connection, self.channel = init_session(mq_url)

        print(gameOddsList)
        self._upload_status = upload_data(self.channel, gameOddsList, "11")
        print(self._upload_status)

if __name__ == '__main__':
    unittest.main()
'''
    def test_TransformRunTime(self):
        self.assertEqual(Action.TransformRunTime("sc", "-60"), "結束")
        self.assertEqual(Action.TransformRunTime("sc", "2022/05/30 00:09:08"), "09:00")
        self.assertEqual(Action.TransformRunTime("sc", ""), "")
        self.assertEqual(Action.TransformRunTime("tt", "-60"), "結束")
        self.assertEqual(Action.TransformRunTime("tn", "-60"), "結束")
        self.assertEqual(Action.TransformRunTime("bb", "-60"), "結束")
        self.assertEqual(Action.TransformRunTime("tn", "2022/05/30 00:09:08"), "09:08")
        self.assertEqual(Action.TransformRunTime("wp", "2022/05/30 00:09:08"), "09:08")
'''

